# Development Guide

TimeBlock Planner ê°œë°œ í™˜ê²½ ì„¤ì • ë° ì•„í‚¤í…ì²˜ ê°€ì´ë“œ

## ğŸ“‹ Prerequisites

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

| í•­ëª© | ë²„ì „ | ë¹„ê³  |
|------|------|------|
| **Node.js** | 18.x ì´ìƒ | LTS ê¶Œì¥ |
| **npm** | 9.x ì´ìƒ | Node.jsì™€ í•¨ê»˜ ì„¤ì¹˜ë¨ |
| **Git** | 2.x ì´ìƒ | ë²„ì „ ê´€ë¦¬ |

### ì„ íƒì  API Keys

| API | ìš©ë„ | í•„ìˆ˜ ì—¬ë¶€ | ë°œê¸‰ì²˜ |
|-----|------|----------|--------|
| **Gemini API Key** | AI ì±„íŒ…, ì‘ì—… ë¶„í•´ | ì„ íƒ (AI ê¸°ëŠ¥ ì‚¬ìš© ì‹œ í•„ìˆ˜) | [Google AI Studio](https://aistudio.google.com/apikey) |
| **Firebase Config** | í´ë¼ìš°ë“œ ë™ê¸°í™” | ì„ íƒ (ë©€í‹° ë””ë°”ì´ìŠ¤ ë™ê¸°í™” ì‹œ) | [Firebase Console](https://console.firebase.google.com/) |

> **Note**: API í‚¤ ì—†ì´ë„ ì•±ì˜ í•µì‹¬ ê¸°ëŠ¥(íƒ€ì„ë¸”ë¡œí‚¹, ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜)ì€ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.

## ğŸš€ Setup

### 1. ì €ì¥ì†Œ í´ë¡ 

```bash
git clone https://github.com/winston365/timeblock_new.git
cd timeblock_new
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
npm install
```

### 3. ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
# ë°©ë²• 1: Electron ì•± (ê¶Œì¥ - ì „ì²´ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸)
npm run electron:dev

# ë°©ë²• 2: ì›¹ ë¸Œë¼ìš°ì €ë§Œ (ë¹ ë¥¸ UI ê°œë°œ)
npm run dev
```

### 4. API í‚¤ ì„¤ì • (ì„ íƒ)

ì•± ì‹¤í–‰ í›„ ì„¤ì •ì—ì„œ ì…ë ¥:
1. ìš°ì¸¡ í•˜ë‹¨ âš™ï¸ ì„¤ì • í´ë¦­
2. **AI íƒ­**: Gemini API Key ì…ë ¥
3. **ë™ê¸°í™” íƒ­**: Firebase Config ì…ë ¥ (JSON í˜•ì‹)

## ğŸ“ Development Commands

```bash
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ê°œë°œ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
npm run dev              # Vite ê°œë°œ ì„œë²„ (ì›¹ ì „ìš©)
npm run electron:dev     # Electron ê°œë°œ ëª¨ë“œ (ê¶Œì¥)
npm run electron:prod    # í”„ë¡œë•ì…˜ ë¹Œë“œ ë¡œì»¬ í…ŒìŠ¤íŠ¸

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ë¹Œë“œ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
npm run build            # ì›¹ ì—ì…‹ ë¹Œë“œ (Vite)
npm run electron:build   # Electron ë©”ì¸ í”„ë¡œì„¸ìŠ¤ ë¹Œë“œ
npm run dist             # ë°°í¬ìš© ë¹Œë“œ (í˜„ì¬ í”Œë«í¼)
npm run dist:win         # Windows ì¸ìŠ¤í†¨ëŸ¬
npm run dist:mac         # macOS ì•±
npm run dist:linux       # Linux íŒ¨í‚¤ì§€

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì½”ë“œ í’ˆì§ˆ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
npm run lint             # ESLint ì‹¤í–‰ (ìœ ì¼í•œ ìë™í™” ê²€ì‚¬)
npm run bump             # íŒ¨ì¹˜ ë²„ì „ ì¦ê°€ ë° ì»¤ë°‹

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ë¯¸ë¦¬ë³´ê¸°
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
npm run preview          # í”„ë¡œë•ì…˜ ë¹Œë“œ ë¯¸ë¦¬ë³´ê¸°
```

## ğŸ— Architecture Overview

### ì‹œìŠ¤í…œ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ELECTRON SHELL                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         Main Process                                 â”‚    â”‚
â”‚  â”‚  electron/main/index.ts                                             â”‚    â”‚
â”‚  â”‚  â€¢ ìœˆë„ìš° ê´€ë¦¬, ì‹œìŠ¤í…œ íŠ¸ë ˆì´, ê¸€ë¡œë²Œ ë‹¨ì¶•í‚¤                            â”‚    â”‚
â”‚  â”‚  â€¢ Auto-updater, ë„¤ì´í‹°ë¸Œ ë©”ë‰´                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚ IPC Bridge                                    â”‚
â”‚                              â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        Preload Script                                â”‚    â”‚
â”‚  â”‚  electron/preload/index.ts                                          â”‚    â”‚
â”‚  â”‚  â€¢ contextBridgeë¡œ ì•ˆì „í•œ API ë…¸ì¶œ                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            RENDERER PROCESS                                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        React Application                             â”‚    â”‚
â”‚  â”‚  src/main.tsx â†’ AppShell                                            â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚    â”‚
â”‚  â”‚  â”‚  Features   â”‚  â”‚   Shared    â”‚  â”‚    Data     â”‚                  â”‚    â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚   â”€â”€â”€â”€â”€â”€    â”‚                  â”‚    â”‚
â”‚  â”‚  â”‚  schedule   â”‚  â”‚  stores/    â”‚  â”‚  db/        â”‚                  â”‚    â”‚
â”‚  â”‚  â”‚  waifu      â”‚  â”‚  services/  â”‚  â”‚  repos/     â”‚                  â”‚    â”‚
â”‚  â”‚  â”‚  gemini     â”‚  â”‚  lib/       â”‚  â”‚             â”‚                  â”‚    â”‚
â”‚  â”‚  â”‚  ...        â”‚  â”‚  utils/     â”‚  â”‚             â”‚                  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚    â”‚
â”‚  â”‚         â”‚                â”‚                â”‚                          â”‚    â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚    â”‚
â”‚  â”‚                          â–¼                                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚                    Zustand Stores                            â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  dailyDataStore, gameStateStore, settingsStore, ...         â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                          â”‚                                           â”‚    â”‚
â”‚  â”‚                          â–¼                                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚                   Repository Layer                           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  baseRepository â†’ dailyDataRepository, gameStateRepo, ...   â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATA PERSISTENCE (3-Tier)                            â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚    IndexedDB     â”‚  â”‚   systemState    â”‚  â”‚     Firebase     â”‚           â”‚
â”‚  â”‚    (Dexie)       â”‚  â”‚   (Dexie)        â”‚  â”‚  Realtime DB     â”‚           â”‚
â”‚  â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚  â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚           â”‚
â”‚  â”‚    Primary       â”‚  â”‚    Key-Value     â”‚  â”‚    Cloud Sync    â”‚           â”‚
â”‚  â”‚    ê³ ì„±ëŠ¥ ë¡œì»¬    â”‚  â”‚    ì‹œìŠ¤í…œ ìƒíƒœ    â”‚  â”‚    ë©€í‹°ë””ë°”ì´ìŠ¤   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚           â”‚                     â”‚                     â”‚                      â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                 â”‚                                            â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                    â”‚      SyncEngine         â”‚                               â”‚
â”‚                    â”‚  Dexie Hooks â†’ Firebase â”‚                               â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           EXTERNAL SERVICES                                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   Gemini API     â”‚  â”‚ Firebase RTDB    â”‚  â”‚ Firebase Func    â”‚           â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚           â”‚
â”‚  â”‚   AI ì±„íŒ…         â”‚  â”‚   ì‹¤ì‹œê°„ ë™ê¸°í™”   â”‚  â”‚   í…œí”Œë¦¿ ìë™ìƒì„±  â”‚           â”‚
â”‚  â”‚   ì‘ì—… ë¶„í•´       â”‚  â”‚   ë©€í‹°ë””ë°”ì´ìŠ¤    â”‚  â”‚   00:00 KST ì‹¤í–‰  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATA FLOW                                â”‚
â”‚                                                                  â”‚
â”‚   UI Component                                                   â”‚
â”‚        â”‚                                                         â”‚
â”‚        â”‚ 1. ì‚¬ìš©ì ì•¡ì…˜                                           â”‚
â”‚        â–¼                                                         â”‚
â”‚   Zustand Store â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚        â”‚                                          â”‚              â”‚
â”‚        â”‚ 2. Optimistic Update                     â”‚ 6. EventBus  â”‚
â”‚        â”‚    (ì¦‰ì‹œ UI ë°˜ì˜)                         â”‚    emit      â”‚
â”‚        â–¼                                          â–¼              â”‚
â”‚   Repository                                 Subscribers         â”‚
â”‚        â”‚                                     (xp, waifu,         â”‚
â”‚        â”‚ 3. Persist                           goal, quest)       â”‚
â”‚        â–¼                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚   â”‚ Dexie   â”‚ system  â”‚ Firebaseâ”‚                               â”‚
â”‚   â”‚ (IndexDB)â”‚ State  â”‚ (async) â”‚                               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚        â”‚                    â”‚                                    â”‚
â”‚        â”‚ 4. Dexie Hook      â”‚                                    â”‚
â”‚        â”‚    (auto-trigger)  â”‚                                    â”‚
â”‚        â–¼                    â”‚                                    â”‚
â”‚   SyncEngine â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚        â”‚                                                         â”‚
â”‚        â”‚ 5. Upload to Firebase                                   â”‚
â”‚        â–¼                                                         â”‚
â”‚   Firebase Realtime DB                                           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í•µì‹¬ ë ˆì´ì–´ ì„¤ëª…

| ë ˆì´ì–´ | ìœ„ì¹˜ | ì—­í•  |
|--------|------|------|
| **UI Components** | `src/features/*/` | React ì»´í¬ë„ŒíŠ¸, ì‚¬ìš©ì ì¸í„°ë™ì…˜ |
| **Zustand Stores** | `src/shared/stores/` | ì „ì—­ ìƒíƒœ ê´€ë¦¬, Optimistic Update |
| **Services** | `src/shared/services/` | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, AI í†µí•©, ë™ê¸°í™” |
| **Repositories** | `src/data/repositories/` | ë°ì´í„° ì˜ì†ì„± ì¶”ìƒí™” |
| **Database** | `src/data/db/` | Dexie ìŠ¤í‚¤ë§ˆ, ë§ˆì´ê·¸ë ˆì´ì…˜ |

## ğŸ“ Directory Structure

```
timeblock_new/
â”œâ”€â”€ ğŸ“‚ src/                      # ì†ŒìŠ¤ ì½”ë“œ ë£¨íŠ¸
â”‚   â”œâ”€â”€ ğŸ“‚ features/             # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ (Feature-Based)
â”‚   â”‚   â”œâ”€â”€ schedule/           # ğŸ“… íƒ€ì„ë¸”ë¡œí‚¹ (ë©”ì¸ ê¸°ëŠ¥)
â”‚   â”‚   â”œâ”€â”€ waifu/              # ğŸ¤– AI ë™ë°˜ì
â”‚   â”‚   â”œâ”€â”€ gemini/             # ğŸ§  AI ì±„íŒ…
â”‚   â”‚   â”œâ”€â”€ gamification/       # ğŸ® XP, ë ˆë²¨, í€˜ìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ goals/              # ğŸ¯ ê¸€ë¡œë²Œ ëª©í‘œ
â”‚   â”‚   â”œâ”€â”€ tasks/              # âœ… ì¸ë°•ìŠ¤ ì‘ì—…
â”‚   â”‚   â”œâ”€â”€ template/           # ğŸ“‹ ì‘ì—… í…œí”Œë¦¿
â”‚   â”‚   â”œâ”€â”€ settings/           # âš™ï¸ ì„¤ì • (tabs/ í•˜ìœ„ ëª¨ë“ˆ)
â”‚   â”‚   â”œâ”€â”€ stats/              # ğŸ“Š í†µê³„ (tabs/ í•˜ìœ„ ëª¨ë“ˆ)
â”‚   â”‚   â”œâ”€â”€ shop/               # ğŸ›’ XP ìƒì 
â”‚   â”‚   â”œâ”€â”€ insight/            # ğŸ’¡ AI ì¸ì‚¬ì´íŠ¸
â”‚   â”‚   â”œâ”€â”€ weather/            # ğŸŒ¤ï¸ ë‚ ì”¨ ì •ë³´
â”‚   â”‚   â”œâ”€â”€ energy/             # âš¡ ì—ë„ˆì§€ ì¶”ì 
â”‚   â”‚   â”œâ”€â”€ focus/              # â±ï¸ í¬ì»¤ìŠ¤ íƒ€ì´ë¨¸
â”‚   â”‚   â”œâ”€â”€ feedback/           # ğŸ’¬ í˜„ì‹¤ ì²´í¬
â”‚   â”‚   â”œâ”€â”€ inventory/          # ğŸ’ ì¸ë²¤í† ë¦¬
â”‚   â”‚   â”œâ”€â”€ pip/                # ğŸ–¼ï¸ Picture-in-Picture
â”‚   â”‚   â””â”€â”€ quickadd/           # â• ë¹ ë¥¸ ì¶”ê°€
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ shared/               # ê³µìœ  ì½”ë“œ
â”‚   â”‚   â”œâ”€â”€ stores/             # Zustand ìŠ¤í† ì–´ (12ê°œ)
â”‚   â”‚   â”œâ”€â”€ services/           # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”‚   â”œâ”€â”€ ai/            # AI í†µí•© (gemini/)
â”‚   â”‚   â”‚   â”œâ”€â”€ sync/          # Firebase ë™ê¸°í™”
â”‚   â”‚   â”‚   â”œâ”€â”€ gameplay/      # ê²Œì„í™” í•¸ë“¤ëŸ¬
â”‚   â”‚   â”‚   â””â”€â”€ behavior/      # í–‰ë™ ì¶”ì 
â”‚   â”‚   â”œâ”€â”€ lib/                # ë¼ì´ë¸ŒëŸ¬ë¦¬ (eventBus ë“±)
â”‚   â”‚   â”œâ”€â”€ components/         # ê³µìš© UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ hooks/              # ê³µìš© React í›…
â”‚   â”‚   â”œâ”€â”€ types/              # TypeScript íƒ€ì…
â”‚   â”‚   â”œâ”€â”€ utils/              # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”‚   â””â”€â”€ subscribers/        # EventBus êµ¬ë…ì
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ data/                 # ë°ì´í„° ë ˆì´ì–´
â”‚   â”‚   â”œâ”€â”€ db/                 # Dexie ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â””â”€â”€ repositories/       # Repository íŒ¨í„´
â”‚   â”‚       â”œâ”€â”€ dailyData/     # ëª¨ë“ˆí™”ëœ Repository
â”‚   â”‚       â””â”€â”€ *.ts           # ê°œë³„ Repository
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ app/                  # ì•± ì…¸
â”‚   â”‚   â”œâ”€â”€ AppShell.tsx       # ë©”ì¸ ë ˆì´ì•„ì›ƒ
â”‚   â”‚   â”œâ”€â”€ components/        # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ hooks/             # ì•± ì´ˆê¸°í™” í›…
â”‚   â”‚
â”‚   â””â”€â”€ main.tsx                # ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
â”‚
â”œâ”€â”€ ğŸ“‚ electron/                 # Electron ì½”ë“œ
â”‚   â”œâ”€â”€ main/                   # ë©”ì¸ í”„ë¡œì„¸ìŠ¤
â”‚   â””â”€â”€ preload/                # Preload ìŠ¤í¬ë¦½íŠ¸
â”‚
â”œâ”€â”€ ğŸ“‚ functions/                # Firebase Cloud Functions
â”‚   â”œâ”€â”€ index.js               # í•¨ìˆ˜ ì •ì˜
â”‚   â””â”€â”€ package.json           # í•¨ìˆ˜ ì˜ì¡´ì„±
â”‚
â”œâ”€â”€ ğŸ“‚ public/                   # ì •ì  ì—ì…‹
â”‚   â””â”€â”€ assets/
â”‚       â”œâ”€â”€ waifu/             # ì™€ì´í‘¸ ì´ë¯¸ì§€
â”‚       â””â”€â”€ audio/             # ì˜¤ë””ì˜¤ íŒŒì¼
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                     # ë¬¸ì„œ
â”‚   â””â”€â”€ analysis/              # ì½”ë“œë² ì´ìŠ¤ ë¶„ì„
â”‚
â””â”€â”€ ğŸ“„ ì„¤ì • íŒŒì¼ë“¤
    â”œâ”€â”€ package.json
    â”œâ”€â”€ tsconfig.json
    â”œâ”€â”€ vite.config.ts
    â”œâ”€â”€ tailwind.config.ts
    â”œâ”€â”€ electron-builder.json
    â””â”€â”€ firebase.json
```

## âš ï¸ Important Notes

### í…ŒìŠ¤íŠ¸
- **ìë™í™”ëœ í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ ì—†ìŒ**
- ë³€ê²½ í›„ ë°˜ë“œì‹œ ìˆ˜ë™ ê²€ì¦:
  ```bash
  npm run preview      # ì›¹ ë¹Œë“œ í…ŒìŠ¤íŠ¸
  npm run electron:prod  # Electron ë¹Œë“œ í…ŒìŠ¤íŠ¸
  ```

### ê¸°ë³¸ê°’ ì •ì±… (Default Values Policy)
- **í•˜ë“œì½”ë”©ëœ fallback ê°’ ê¸ˆì§€** - ë¶ˆì¼ì¹˜ ë²„ê·¸ì˜ ì›ì¸
- ëª¨ë“  ì„¤ì • ê´€ë ¨ ê¸°ë³¸ê°’ì€ `src/shared/constants/defaults.ts`ì—ì„œ import:
  ```typescript
  // âŒ ê¸ˆì§€
  const focusInterval = settings?.focusTimerMinutes ?? 25;
  
  // âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
  import { SETTING_DEFAULTS } from '@/shared/constants/defaults';
  const focusInterval = settings?.focusTimerMinutes ?? SETTING_DEFAULTS.focusTimerMinutes;
  ```
- **ìƒìˆ˜ ì¢…ë¥˜**:
  - `SETTING_DEFAULTS`: ì‚¬ìš©ì ì„¤ì • (focusTimerMinutes ë“±)
  - `IDLE_FOCUS_DEFAULTS`: ë¹„í™œë™ ì§‘ì¤‘ëª¨ë“œ (enabled, minutes, countdownSeconds)
  - `GAME_STATE_DEFAULTS`: ê²Œì„ ìƒíƒœ ì´ˆê¸°í™”

### ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ
Dexie ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ 3ê³³ ëª¨ë‘ ì—…ë°ì´íŠ¸:
1. `src/data/db/dexieClient.ts` - ë²„ì „ ì¦ê°€ + ìŠ¤í‚¤ë§ˆ
2. `src/data/repositories/` - Repository ë¡œì§
3. `src/shared/services/sync/firebase/strategies.ts` - Firebase ì „ëµ

### Firebase ë™ê¸°í™”
- **Server-First Templates**: Cloud Functionì´ 00:00 KSTì— í…œí”Œë¦¿ ìƒì„±
- **í´ë¼ì´ì–¸íŠ¸ëŠ” ê´€ì°°ë§Œ**: í…œí”Œë¦¿ ì´ì¤‘ ìƒì„± ë°©ì§€
- **LWW ì¶©ëŒ í•´ê²°**: Last-Write-Wins ë°©ì‹

### ë³´ì•ˆ
- API í‚¤ëŠ” ë¡œì»¬ì—ë§Œ ì €ì¥ (Firebase ì—…ë¡œë“œ ì•ˆ ë¨)
- `contextIsolation: true`, `sandbox: true`
- Preload ìŠ¤í¬ë¦½íŠ¸ë¡œ ì•ˆì „í•œ IPC

## ğŸ”— Related Documentation

- [README.md](./README.md) - í”„ë¡œì íŠ¸ ê°œìš”
- [CLAUDE.md](./CLAUDE.md) - AI ì—ì´ì „íŠ¸ ê°€ì´ë“œ
- [Firebase Sync README](./src/shared/services/sync/firebase/README.md) - ë™ê¸°í™” ìƒì„¸
- [EventBus README](./src/shared/lib/eventBus/README.md) - ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
