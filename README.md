# TimeBlock Planner

> **ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ê³¼ AI ë™ë°˜ì ì‹œìŠ¤í…œì„ ê²°í•©í•œ ì§€ëŠ¥í˜• ë¡œì»¬-í¼ìŠ¤íŠ¸ íƒ€ì„ë¸”ë¡œí‚¹ í”Œë˜ë„ˆ**

TimeBlock PlannerëŠ” ë‹¨ìˆœí•œ ì¼ì • ê´€ë¦¬ë¥¼ ë„˜ì–´, **íƒ€ì„ë¸”ë¡œí‚¹(Time-blocking)** ë°©ë²•ë¡ ì„ ê¸°ë°˜ìœ¼ë¡œ ê²Œì„í™” ìš”ì†Œ(RPG)ì™€ ì •ì„œì  ì§€ì§€ë¥¼ ì œê³µí•˜ëŠ” **AI ê°€ìƒ ë™ë°˜ì(Waifu Companion)**ë¥¼ ê²°í•©í•˜ì—¬ ê¹Šì€ ëª°ì…ê³¼ ìƒì‚°ì„±ì„ ì´ëŒì–´ë‚´ëŠ” ë°ìŠ¤í¬í†± ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

**ë¡œì»¬-í¼ìŠ¤íŠ¸(Local-First)** ì•„í‚¤í…ì²˜ë¥¼ ì±„íƒí•˜ì—¬ ì˜¤í”„ë¼ì¸ì—ì„œë„ ì™„ì „í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ë©°, ë°±ê·¸ë¼ìš´ë“œì—ì„œ í´ë¼ìš°ë“œì™€ ë™ê¸°í™”ë˜ì–´ ë°ì´í„° ì•ˆì „ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥ (Key Features)

### ğŸ“… ì§€ëŠ¥í˜• íƒ€ì„ë¸”ë¡œí‚¹ ì‹œìŠ¤í…œ
í•˜ë£¨ë¥¼ 3ì‹œê°„ ë‹¨ìœ„ì˜ 6ê°œ ë¸”ë¡ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•˜ë©°, ë‹¨ìˆœ ì‹œê°„ ë°°ë¶„ì´ ì•„ë‹Œ 'ì‹¬ë¦¬ì  ì €í•­'ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
- **6-Block System**: 05-08, 08-11, 11-14, 14-17, 17-20, 20-23
- **ì €í•­ë„(Resistance) ê¸°ë°˜ ìŠ¤ì¼€ì¤„ë§**:
  - ğŸŸ¢ **Low (1.0x)**: ì¦ê²ê³  ê°€ë²¼ìš´ ì‘ì—…
  - ğŸŸ¡ **Medium (1.3x)**: í‰ë²”í•œ ì—…ë¬´
  - ğŸ”´ **High (1.6x)**: ë¯¸ë£¨ê³  ì‹¶ê³  ë¶€ë‹´ë˜ëŠ” ì‘ì—… (ì‹œê°„ ìë™ ë³´ì •)
- **ë¸”ë¡ ìƒíƒœ**: `Lock`(ê³„íš í™•ì •), `Perfect`(ì‹œê°„ ë‚´ ì™„ìˆ˜), `Timer`(ì§„í–‰ ì¤‘), `Failed`(ì‹¤íŒ¨)

### ğŸ® RPG ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ (Gamification)
ìƒì‚°ì„± í™œë™ì„ ê²Œì„ í”Œë ˆì´ë¡œ ì¹˜í™˜í•˜ì—¬ ì§€ì†ì ì¸ ë™ê¸°ë¶€ì—¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
- **XP & ë ˆë²¨ë§**: ì‘ì—…ì˜ ë‚œì´ë„ì™€ ìˆ˜í–‰ ì‹œê°„ì— ë”°ë¥¸ ê²½í—˜ì¹˜ íšë“ (ì§€ìˆ˜ ì„±ì¥ ê³¡ì„  ì ìš©)
- **ë³´ìŠ¤ ë ˆì´ë“œ (Boss Raid)**: ë§¤ì¼ ë°¤, í•˜ë£¨ ë™ì•ˆ ì™„ë£Œí•œ ì‘ì—…ëŸ‰ìœ¼ë¡œ ë³´ìŠ¤ ëª¬ìŠ¤í„°ì—ê²Œ ë°ë¯¸ì§€ë¥¼ ì…íˆëŠ” ë ˆì´ë“œ ì‹œìŠ¤í…œ
  - **Boss Dex**: 31ì¢…ì˜ ìœ ë‹ˆí¬ ë³´ìŠ¤, 3D í™€ë¡œê·¸ë¨ ì¹´ë“œ ìˆ˜ì§‘ ë° ì‹¤ë£¨ì—£ ë„ê°
- **ì¼ì¼ í€˜ìŠ¤íŠ¸**: 'ì˜¤ì „ ë¸”ë¡ ëª¨ë‘ ì„±ê³µ', 'ë‚œì´ë„ ìƒ ì‘ì—… 1íšŒ ì™„ë£Œ' ë“± ë§¤ì¼ ê°±ì‹ ë˜ëŠ” í€˜ìŠ¤íŠ¸
- **ìƒì  & ì¸ë²¤í† ë¦¬**: íšë“í•œ XPë¡œ ìƒì‚°ì„± ì•„ì´í…œì´ë‚˜ ë™ë°˜ì ì½”ìŠ¤íŠ¬/ì„ ë¬¼ êµ¬ë§¤

### ğŸ¤– AI ë™ë°˜ì (Waifu Companion)
ë‹¨ìˆœí•œ ì±—ë´‡ì´ ì•„ë‹Œ, ì‚¬ìš©ìì˜ ìƒíƒœë¥¼ ì¸ì§€í•˜ê³  ë¨¼ì € ë§ì„ ê±°ëŠ” ìƒí˜¸ì‘ìš©í˜• íŒŒíŠ¸ë„ˆì…ë‹ˆë‹¤.
- **Live2Dê¸‰ ë°˜ì‘ì„±**: ë§ˆìš°ìŠ¤ ì˜¤ë²„, í´ë¦­, ì‘ì—… ì„±ê³µ/ì‹¤íŒ¨ì— ë”°ë¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì‘í•˜ëŠ” í¬ì¦ˆ ì‹œìŠ¤í…œ
- **ê°ì • ì‹œìŠ¤í…œ**: í˜¸ê°ë„(0-100)ì— ë”°ë¼ íƒœë„ê°€ ë³€í™” (ì ëŒ€ì  â†’ ë¬´ê´€ì‹¬ â†’ ì¹œë°€ â†’ ì• ì •)
- **íŠ¹ìˆ˜ ìƒí˜¸ì‘ìš©**: ë¨¸ë¦¬ ì“°ë‹¤ë“¬ê¸°, ì„ ë¬¼í•˜ê¸° ë“±ì„ í†µí•´ í•´ê¸ˆë˜ëŠ” 7ê°€ì§€ ì‹œí¬ë¦¿ í¬ì¦ˆ

### ğŸ§  Gemini AI & RAG í†µí•©
Googleì˜ Gemini Pro ëª¨ë¸ê³¼ RAG(ê²€ìƒ‰ ì¦ê°• ìƒì„±) ê¸°ìˆ ì„ ê²°í•©í•˜ì—¬ ë‚´ ë°ì´í„°ë¥¼ ê¸°ì–µí•˜ëŠ” AI ë¹„ì„œì…ë‹ˆë‹¤.
- **í•˜ì´ë¸Œë¦¬ë“œ RAG (Retrieval-Augmented Generation)**:
  - **Direct Query**: "ì§€ë‚œì£¼ í™”ìš”ì¼ì— ë­ í–ˆì–´?" â†’ IndexedDB ì •ë°€ ê²€ìƒ‰ (100% ì •í™•ë„)
  - **Vector Search**: "ìµœê·¼ì— ì½”ë”© ê´€ë ¨í•´ì„œ í˜ë“¤ì–´í–ˆë˜ ê²Œ ë­ì•¼?" â†’ Orama ë²¡í„° ê²€ìƒ‰ (ì˜ë¯¸ë¡ ì  ì¶”ë¡ )
- **ì»¨í…ìŠ¤íŠ¸ ì¸ì‹**: í˜„ì¬ ìˆ˜í–‰ ì¤‘ì¸ ì‘ì—…, ìµœê·¼ ì‹¤íŒ¨ìœ¨, ì‚¬ìš©ìì˜ ê¸°ë¶„ ìƒíƒœë¥¼ íŒŒì•…í•˜ì—¬ ì¡°ì–¸
- **ê¸°ëŠ¥ì  AI**:
  - **ì‘ì—… ë¶„í•´**: ë³µì¡í•œ ì‘ì—…ì„ ì‹¤í–‰ ê°€ëŠ¥í•œ ë‹¨ìœ„ë¡œ ìë™ ë¶„í• 
  - **ìë™ íƒœê¹…**: ê³¼ê±° íŒ¨í„´ì„ ë¶„ì„í•˜ì—¬ ì ì ˆí•œ íƒœê·¸ ì¶”ì²œ

### ğŸŒ©ï¸ 3-Tier ë°ì´í„° ë™ê¸°í™”
ë°ì´í„° ìœ ì‹¤ì„ ì›ì²œ ì°¨ë‹¨í•˜ëŠ” ê°•ë ¥í•œ ë™ê¸°í™” ì•„í‚¤í…ì²˜ë¥¼ ìë‘í•©ë‹ˆë‹¤.
1.  **Local (IndexedDB/Dexie)**: ëª¨ë“  ë°ì´í„°ëŠ” ë¡œì»¬ì— ìš°ì„  ì €ì¥ (ì˜¤í”„ë¼ì¸ ì™„ë²½ ì§€ì›)
2.  **Cloud (Firebase RTDB)**: ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤ì‹œê°„ ë°±ì—… ë° ë‹¤ì¤‘ ê¸°ê¸° ë™ê¸°í™”
3.  **Conflict Resolution**: Last-Write-Wins ì•Œê³ ë¦¬ì¦˜ê³¼ í•´ì‹œ ë¹„êµë¥¼ í†µí•œ ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)

### Core
-   **Runtime**: Electron 39.2.1
-   **Framework**: React 19.2.1
-   **Language**: TypeScript 5.5+
-   **Build Tool**: Vite 7.2.2

### State & Data
-   **State Management**: Zustand 5.0.8
-   **Local Database**: Dexie.js 4.0 (IndexedDB Wrapper)
-   **Search Engine**: Orama 3.1 (In-memory Vector Search)
-   **Cloud Database**: Firebase Realtime Database
-   **Serverless**: Firebase Cloud Functions

### UI/UX
-   **Styling**: Tailwind CSS 3.4
-   **Animation**: Framer Motion 12, Canvas Confetti
-   **Icons**: Lucide React
-   **Charts**: Recharts 2.13

---

## ğŸ— ì•„í‚¤í…ì²˜ í•˜ì´ë¼ì´íŠ¸

### 1. Handler Pattern (ì‘ì—… ì™„ë£Œ íŒŒì´í”„ë¼ì¸)
ì‘ì—… ì™„ë£Œ ì‹œ ë°œìƒí•˜ëŠ” ë³µì¡í•œ ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ë‹¨ì¼ ì±…ì„ ì›ì¹™(SRP)ì— ë”°ë¼ ë¶„ë¦¬ëœ í•¸ë“¤ëŸ¬ ì²´ì¸ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```mermaid
graph LR
    TaskComplete --> GoalHandler[ëª©í‘œ ì§„í–‰ë„]
    GoalHandler --> XPHandler[XP/ë³´ìƒ ê³„ì‚°]
    XPHandler --> QuestHandler[í€˜ìŠ¤íŠ¸ ê°±ì‹ ]
    QuestHandler --> WaifuHandler[ë™ë°˜ì í˜¸ê°ë„]
    WaifuHandler --> BlockHandler[íƒ€ì„ë¸”ë¡ í™•ì •]
```

### 2. Repository Pattern
UI ì»´í¬ë„ŒíŠ¸ëŠ” ì ˆëŒ€ ë°ì´í„°ë² ì´ìŠ¤ë‚˜ Firebaseì— ì§ì ‘ ì ‘ê·¼í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëª¨ë“  ë°ì´í„° ì ‘ê·¼ì€ `Repository` ê³„ì¸µì„ í†µí•´ ì´ë£¨ì–´ì§€ë©°, ì´ ê³„ì¸µì´ ë¡œì»¬ DBì™€ ì›ê²© ë™ê¸°í™”ë¥¼ ì¡°ìœ¨í•©ë‹ˆë‹¤.

### 3. Google Calendar & Tasks ì–‘ë°©í–¥ ë™ê¸°í™” (v17)
- **Tasks**: ì•± ë‚´ 'ì£¼ìš” ì‘ì—…' â†” Google Tasks ì–‘ë°©í–¥ ë™ê¸°í™”
- **Events**: ì•± ë‚´ 'ì„ì‹œ ìŠ¤ì¼€ì¤„' â†” Google Calendar ì´ë²¤íŠ¸ ì–‘ë°©í–¥ ë™ê¸°í™”
- ë³„ë„ì˜ ë§¤í•‘ í…Œì´ë¸”(`taskGoogleTaskMappings`, `tempScheduleCalendarMappings`)ì„ í†µí•´ ID ë§¤ì¹­ ë° ë³€ê²½ ì‚¬í•­ ì¶”ì 

---

## ğŸ—„ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (Dexie v17)

í”„ë¡œì íŠ¸ëŠ” ì§€ì†ì ìœ¼ë¡œ ë°œì „í•˜ë©° ì´ 17ë²ˆì˜ ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ê±°ì³¤ìŠµë‹ˆë‹¤.

| í…Œì´ë¸” | ì„¤ëª… | ë¹„ê³  |
| :--- | :--- | :--- |
| **dailyData** | ë‚ ì§œë³„ ì‘ì—…, íƒ€ì„ë¸”ë¡ ë°ì´í„°ì˜ í•µì‹¬ ì €ì¥ì†Œ | `date` (PK) |
| **gameState** | ë ˆë²¨, XP, ë³´ìŠ¤ì „ ì§„í–‰ë„ ë“± ê²Œì„ ìƒíƒœ | Singleton |
| **globalInbox** | ë‚ ì§œê°€ ì§€ì •ë˜ì§€ ì•Šì€ ì‘ì—… (ì¸ë°•ìŠ¤) | |
| **completedInbox** | ì™„ë£Œëœ ì¸ë°•ìŠ¤ ì‘ì—… ì•„ì¹´ì´ë¸Œ | v7+ |
| **templates** | ë°˜ë³µ ì‚¬ìš©ë˜ëŠ” ì‘ì—… ë° ë£¨í‹´ í…œí”Œë¦¿ | |
| **waifuState** | ë™ë°˜ì í˜¸ê°ë„, í•´ê¸ˆëœ í¬ì¦ˆ, ìƒí˜¸ì‘ìš© ê¸°ë¡ | |
| **chatHistory** | Gemini AIì™€ì˜ ëŒ€í™” ë¡œê·¸ | RAG ì†ŒìŠ¤ë¡œ í™œìš© |
| **ragDocuments** | ê²€ìƒ‰ íš¨ìœ¨í™”ë¥¼ ìœ„í•œ ë²¡í„° ì„ë² ë”© ì €ì¥ì†Œ | v12+ |
| **systemState** | ì•± ì„¤ì • ë° ë¡œì»¬ ì „ìš© ìƒíƒœ (localStorage ëŒ€ì²´) | v6+ |
| **weeklyGoals** | ì£¼ê°„ ëª©í‘œ ë° ì„±ê³¼ ì¶”ì  | v14+ |
| **taskGoogleTaskMappings** | Google Tasks ì—°ë™ì„ ìœ„í•œ ID ë§¤í•‘ | v17+ |
| **tempScheduleTasks** | íƒ€ì„ë¸”ë¡ì— í• ë‹¹ë˜ê¸° ì „ì˜ ì„ì‹œ ì¼ì • | v15+ |

---

## ğŸš€ ì‹œì‘í•˜ê¸° (Getting Started)

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Node.js 18 ì´ìƒ
- npm

### ì„¤ì¹˜ ë° ì‹¤í–‰

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/winston365/timeblock_new.git
cd timeblock_new

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# 3. ê°œë°œ ëª¨ë“œ ì‹¤í–‰ (Electron + React HMR)
npm run electron:dev

# (ì„ íƒ) ì›¹ ì „ìš© ê°œë°œ ëª¨ë“œ
npm run dev
```

### ë¹Œë“œ ë° ë°°í¬

```bash
# í˜„ì¬ OSì— ë§ëŠ” ì¸ìŠ¤í†¨ëŸ¬ ìƒì„±
npm run dist

# íŠ¹ì • í”Œë«í¼ ë¹Œë“œ
npm run dist:win   # Windows (.exe)
npm run dist:mac   # macOS (.dmg)
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë° í’ˆì§ˆ ê´€ë¦¬

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (Vitest)
npm test

# ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ ìƒì„±
npm run test:coverage

# ë¦°íŠ¸ ê²€ì‚¬
npm run lint
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ app/                 # ì•± ì§„ì…ì  ë° ì´ˆê¸°í™” ë¡œì§ (AppShell)
â”œâ”€â”€ data/                # ë°ì´í„° ê³„ì¸µ
â”‚   â”œâ”€â”€ db/              # Dexie ìŠ¤í‚¤ë§ˆ ì •ì˜ ë° ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ repositories/    # ë°ì´í„° ì ‘ê·¼ ê°ì²´ (DAO)
â”œâ”€â”€ features/            # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ (Feature-First Architecture)
â”‚   â”œâ”€â”€ schedule/        # íƒ€ì„ë¸”ë¡œí‚¹ ë©”ì¸ UI
â”‚   â”œâ”€â”€ waifu/           # ë™ë°˜ì ì‹œìŠ¤í…œ ë¡œì§ ë° ì—ì…‹
â”‚   â”œâ”€â”€ gemini/          # AI ì±„íŒ… ë° RAG
â”‚   â”œâ”€â”€ gamification/    # ê²Œì„ ë¡œì§ (ë³´ìŠ¤, ìƒì  ë“±)
â”‚   â””â”€â”€ ...
â”œâ”€â”€ shared/              # ê³µìš© ëª¨ë“ˆ
â”‚   â”œâ”€â”€ lib/             # EventBus, ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë˜í¼
â”‚   â”œâ”€â”€ services/        # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (Sync, TaskCompletion ë“±)
â”‚   â”œâ”€â”€ stores/          # Zustand ìŠ¤í† ì–´
â”‚   â””â”€â”€ types/           # ì „ì—­ íƒ€ì… ì •ì˜
â””â”€â”€ styles/              # Tailwind ì„¤ì • ë° ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼
```

---

**Made with â¤ï¸ by winston365**
*Private Project - All Rights Reserved*
