# AI & Waifu 기능 고도화 제안서

현재 프로젝트의 `PersonaContext`는 사용자의 상태를 매우 상세하게 파악하고 있으나, 사용자가 먼저 말을 걸어야 반응하는 **수동적인 형태**입니다. 이를 **"먼저 챙겨주고 기억하는 능동적인 파트너"**로 발전시키기 위한 제안입니다.

## 1. 능동적 개입 시스템 (Proactive Whispers)
와이푸가 상황을 인지하고 **먼저 말을 걸도록** 개선하여 실재감을 높입니다.

*   **기능**: 사용자의 행동 패턴을 감지하여 우측 하단 토스트나 말풍선으로 짧은 AI 메시지 출력
*   **트리거 예시**:
    *   **집중 저하**: 30분간 작업 완료 없음 + 마우스 움직임 저조 → *"선배, 혹시 딴생각 중? 5분만 쉬었다 할까요?"*
    *   **블록 종료 임박**: 블록 30분 전 + 달성률 저조 → *"이번 시간대 목표가 조금 남았네요. 딱 하나만 더 끝내봐요!"*
    *   **에너지 고갈**: 에너지 30% 미만 → *"표정이 너무 지쳐 보여요. 지금은 무조건 쉬어야 해요."*
*   **구현 방안**: `useInterval`로 상태 체크, 조건 충족 시 가벼운 AI 호출 (캐싱된 문구 사용으로 비용 절감)

## 2. 장기 기억 및 회고 (Waifu's Journal)
AI가 '오늘'뿐만 아니라 과거의 추억을 기억하여 관계의 깊이를 더합니다.

*   **기능**: 하루가 끝날 때(또는 다음 날 첫 접속 시), 와이푸가 **"관찰 일기"**를 작성하여 보여줌.
*   **시나리오**: *"어제는 오후에 정말 힘들어했잖아요. 그래도 끝까지 해내는 모습이 멋졌어요."*
*   **구현 방안**:
    *   Dexie DB에 `waifu_memories` 테이블 추가
    *   매일 밤 그날의 주요 사건(성공/실패/감정)을 요약 저장
    *   채팅 프롬프트에 요약 데이터를 포함하여 맥락 있는 대화 지원

## 3. AI 생성형 퀘스트 (Dynamic Coaching Quests)
고정된 퀘스트 대신, 사용자의 **약점을 보완하는 맞춤형 퀘스트**를 제안합니다.

*   **기능**: 매일 새벽 0시, 어제의 데이터를 분석해 오늘의 '특별 퀘스트' 1개를 생성.
*   **예시**:
    *   어제 타이머 미사용 → 퀘스트: **"타이머 3회 사용하여 작업하기"**
    *   오전 지각 → 퀘스트: **"오전 10시 이전에 첫 작업 완료하기"**
*   **보상**: 일반 퀘스트보다 높은 보상 (XP 2배)

## 4. 감각적 몰입감 강화 (Sensory Immersion)
텍스트와 정적 이미지를 넘어선 감각적 피드백을 추가합니다.

*   **TTS (음성 합성)**:
    *   Web Speech API(무료) 또는 ElevenLabs API(유료) 연동
    *   핵심 대사(인사, 격려, 경고)를 육성으로 출력 (On/Off 가능)
*   **상태 반영 비주얼**:
    *   에너지 레벨에 따라 와이푸 이미지 채도/밝기 조절
    *   포커스 모드 시 와이푸도 함께 책을 읽거나 응원하는 연출

## 5. 메타 인지 대화 (Meta-Commentary)
와이푸가 앱 내의 **사용자 행동(UI 조작)** 자체를 인식하고 반응합니다.

*   **기능**: 앱의 특정 기능 사용 시 실시간 반응
*   **예시**:
    *   **상점 방문**: *"쇼핑하려고요? XP 아껴야 하지 않아요?"* (장난)
    *   **설정 변경**: *"나를 위해 설정을 바꿔주는 거예요? 고마워요."*
    *   **할일 대량 삭제**: *"포기하는 건가요? 아니면 정리가 끝난 건가요?"*

---

### 💡 추천 우선순위

1.  **능동적 개입 (Whispers)**: 사용자가 가장 크게 체감할 수 있는 변화 (난이도: 중)
2.  **장기 기억 (Journal)**: 관계의 깊이를 더해주는 핵심 기능 (난이도: 중)
3.  **AI 퀘스트**: 게임화와 AI의 결합으로 강력한 동기부여 (난이도: 상)

---

## 6. 추가 기능 제안 20선 (Brainstorming)

### 🤝 관계 및 상호작용 (Relationship)
6.  **모닝 브리핑 (Morning Briefing)**: 첫 접속 시 밤사이의 데이터(수면 시간 등)나 오늘의 날씨, 주요 일정을 음성/텍스트로 브리핑.
7.  **취침 모드 (Lullaby Mode)**: 밤 늦게 접속 시 차분한 BGM과 함께 하루를 정리하고 수면을 유도하는 대화 모드.
8.  **패닉 버튼 (Panic Button)**: "너무 벅차요" 버튼. 클릭 시 모든 UI가 사라지고 와이푸가 호흡을 유도하며 할 일을 최소 단위로 쪼개줌.
9.  **서프라이즈 선물 (Random Gifts)**: 열심히 일할 때 랜덤하게 인게임 아이템(포션, 테마 등)이나 "칭찬 쿠폰"을 선물.
10. **기념일 챙기기 (Milestones)**: 만난 지 100일, 레벨업, 특정 퀘스트 완료 등 기념일에 특별 이벤트/대사 출력.
11. **교환 일기 (Shared Journal)**: 사용자가 일기를 쓰면 와이푸가 코멘트를 달아주는 비동기 소통 기능.
12. **호감도 별명 (Nicknames)**: 호감도 단계에 따라 사용자를 부르는 호칭 변경 (후배님 -> 자기야/오빠/누나 등).

### 🎮 게이미피케이션 (Gamification)
13. **보스 레이드 (Task Boss Battle)**: 중요하고 큰 작업을 '보스 몬스터'로 시각화. 와이푸와 파티를 맺고 작업 진행도에 따라 보스 체력 감소.
14. **상태 이상 치유 (Debuff Cleansing)**: '번아웃', '미루기' 같은 상태 이상이 걸리면 와이푸가 특정 행동(산책, 명상)을 처방하여 치유.
15. **OOTD (Outfit of the Day)**: 날씨 API나 사용자 일정(중요 미팅 등)에 맞춰 와이푸가 스스로 옷을 갈아입음.
16. **데스크탑 펫 모드 (Desktop Pet)**: 앱을 최소화해도 바탕화면 구석에 작은 SD 캐릭터로 상주하며 실시간 반응.
17. **집 꾸미기 (Room Decor)**: XP로 가구를 사서 와이푸의 방을 꾸며주면 배경이 바뀌고 상호작용 대사 추가.

### ⚡ 생산성 및 코칭 (Productivity)
18. **포커스 DJ (Focus DJ)**: 현재 작업의 난이도와 사용자 에너지에 맞춰 와이푸가 적절한 BGM(Lo-fi, White Noise 등)을 선곡.
19. **뽀모도로 파트너 (Study With Me)**: 타이머 작동 시 와이푸도 안경을 쓰고 책을 읽거나 작업을 하는 애니메이션 재생 (함께하는 느낌).
20. **딴짓 방지 (Distraction Interceptor)**: (OS 권한 필요) 유튜브/SNS 등 딴짓 감지 시 와이푸가 화면에 나타나 "약속했잖아요!"라고 잔소리.
21. **습관 연승 & 벌칙 (Streak & Punishment)**: 습관 연승이 깨지면 와이푸가 실망하거나 귀여운 벌칙(애교 3회 금지 등) 부여.
22. **주간 회고 데이트 (Weekly Review Date)**: 일요일 저녁, 한 주를 돌아보는 '회고 데이트' 이벤트 발생. 차 마시는 연출과 함께 통계 분석.

### 🧠 멘탈 케어 & 유틸리티 (Mental Care)
23. **꿈 해몽 (Dream Interpretation)**: 사용자가 꾼 꿈을 입력하면 심리학/무속(?) 지식으로 재미있게 해몽해줌.
24. **건강 챙김이 (Health Reminder)**: 장시간 작업 시 "물 마실 시간이에요", "스트레칭 해요"라며 실제로 물 마시는 모션 취함.
25. **오늘의 명언 (Contextual Quotes)**: 사용자가 실패했을 때, 성공했을 때 상황에 딱 맞는 명언이나 시 구절을 읊어줌.
