<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>타임블럭 플래너 - Daily Quest</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      // 브라우저 기본 우클릭 메뉴 완전 차단 (다중 방어 시스템)
      (function() {
        'use strict';

        // 차단 핸들러
        function blockContextMenu(e) {
          // task-card나 context-menu 내부는 허용
          const isTaskCard = e.target && e.target.closest && e.target.closest('.task-card');
          const isContextMenu = e.target && e.target.closest && e.target.closest('.context-menu');

          if (!isTaskCard && !isContextMenu) {
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            return false;
          }
        }

        // 방어벽 1: document에 즉시 등록 (캡처 단계, passive false)
        document.addEventListener('contextmenu', blockContextMenu, { capture: true, passive: false });

        // 방어벽 2: document에 버블링 단계에서도 등록
        document.addEventListener('contextmenu', blockContextMenu, { passive: false });

        // 방어벽 3: DOMContentLoaded 후 body, html에도 등록
        document.addEventListener('DOMContentLoaded', function() {
          if (document.body) {
            document.body.addEventListener('contextmenu', blockContextMenu, { capture: true, passive: false });
          }
          if (document.documentElement) {
            document.documentElement.addEventListener('contextmenu', blockContextMenu, { capture: true, passive: false });
          }
        });

        // 방어벽 4: window에도 등록 (최후의 방어선)
        window.addEventListener('contextmenu', blockContextMenu, { capture: true, passive: false });

        // 방어벽 5: oncontextmenu 속성도 설정
        document.oncontextmenu = function(e) {
          return blockContextMenu(e) !== false;
        };
      })();
    </script>
  </body>
</html>
